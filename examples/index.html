<!DOCTYPE html><head>
<title>LittleJS Example Browser</title>
<link rel=icon type=image/png href=favicon.png>
<link rel=stylesheet href=style.css?8>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head><body>
<div id=container1>
<div id=container3>
<p id=titleInfo>LittleJS Example Browser</p>
<p id=exampleInfo></p>
<a id=exampleLink target='_blank'></a>
<div id=divCodeOptions>
<hr>
Theme:
<select style=width:120px onchange=loadTheme() id=selectTheme></select>
<select style=width:40px onchange=loadTheme() id=selectFontSize>
    <option value=10px>XS</option>
    <option value=13px>S</option>
    <option value=16px selected>M</option>
    <option value=20px>L</option>
    <option value=24px>XL</option>
</select>
<span class=nowrap><input type=checkbox id=checkboxLiveEdit checked>Live Edit</span>
<span class=nowrap><input type=checkbox id=checkboxJumpToErrors>Jump to Errors</span>
</div>
<div id=divTextareas>
<textarea id=textareaCode oninput=codeInput() spellcheck=false></textarea>
<textarea id=textareaError readonly spellcheck=false></textarea>
<textarea id=textareaConsole readonly spellcheck=false></textarea>
</div>
</div>
<div id=container2>
<div style='display:flex;justify-content:center'>
<div id=iframeContainer></div>
</div>
<div>
<input id=inputSearch placeholder='Search examples...' oninput=filterExamples() onkeydown='if(event.key==="Escape")filterExamples(1)'> 
<button id=buttonRestart onclick=restartCode()>Restart</button>
<button id=buttonPause>Pause</button>
<span id=container4>
<button id=buttonFullscreen>Fullscreen</button>
<button id=buttonScreenshot>Screenshot</button>
<span class=nowrap><input type=checkbox id=checkboxWebGL checked>WebGL</span>
</span>
</div>
<span id=selectExampleText class=nowrap>Select an example...</span>
<select id=selectExample onchange=setExample() size=2></select>
</div>
</div>
<script>
'use strict';

class ExampleInfo
{
    constructor(name, filename, description='', largeExample=false)
    {
        if (filename && !largeExample)
            filename = 'shorts/' + filename;
        this.name = name;
        this.filename = filename;
        this.description = description;
        this.largeExample = largeExample;
    }
}

const exampleList = 
[
    new ExampleInfo('--- SHORT EXAMPLES ---'),
    new ExampleInfo('Hello World', 'helloWorld.js', 'Minimal starter example - [basic, beginner]'),
    new ExampleInfo('Shapes', 'shapes.js', 'Draw geometric shapes - [graphics, primitives, basic]'),
    new ExampleInfo('Colors', 'colors.js', 'Color object and HSL usage - [graphics, color, basic]'),
    new ExampleInfo('Blending', 'blending.js', 'Blending modes and transparency - [graphics, effects]'),
    new ExampleInfo('Timers', 'timers.js', 'Timer object and timing functions - [utilities, time]'),
    new ExampleInfo('Texture', 'texture.js', 'Display and manipulate textures - [graphics, sprites]'),
    new ExampleInfo('Particles', 'particles.js', 'Particle system basics - [effects, particles]'),
    new ExampleInfo('Play Sound', 'playSound.js', 'Sound effects with ZzFX - [audio, sound]'),
    new ExampleInfo('System Font', 'systemFont.js', 'Built-in bitmap font rendering - [text, font]'),
    new ExampleInfo('Sprite Atlas', 'spriteAtlas.js', 'Sprite atlas and tile rendering - [graphics, sprites]'),
    new ExampleInfo('Animation', 'animation.js', 'Sprite animation techniques - [animation, sprites]'),
    new ExampleInfo('Clock', 'clock.js', 'Real-time clock display - [time, ui, utilities]'),
    new ExampleInfo('Medals', 'medals.js', 'Achievement system demo - [ui, achievements]'),
    new ExampleInfo('Tile Layer', 'tileLayer.js', 'Tile layer rendering system - [tiles, levels]'),
    new ExampleInfo('Piano', 'piano.js', 'Interactive piano keyboard - [audio, input, ui]'),
    new ExampleInfo('Maze Generator', 'maze.js', 'Procedural maze generation - [algorithm, generation]'),
    new ExampleInfo('Starfield', 'starfield.js', 'Animated starfield - [effects, space]'),
    new ExampleInfo('Parallax', 'parallax.js', 'Parallax mountains - [graphics, effects]'),
    new ExampleInfo('--- MINI GAMES ---'),
    new ExampleInfo('Platformer Game', 'platformer.js', 'Jump and run platformer - [game, platformer, physics]'),
    new ExampleInfo('Top Down Game', 'topDown.js', 'Adventure with collision - [game, topdown, rpg]'),
    new ExampleInfo('Tilted View', 'tiltedView.js', 'Pseudo 3D tilted perspective - [3d, camera, perspective]'),
    new ExampleInfo('Space Game', 'spaceGame.js', 'Spaceship with parallax starfield - [game, space, shooter]'),
    new ExampleInfo('Lander Game', 'landerGame.js', 'Lunar lander physics game - [game, physics, thrust]'),
    new ExampleInfo('Flappy Game', 'flappyGame.js', 'Flappy bird clone - [game, arcade, flying]'),
    new ExampleInfo('Hill Glide Game', 'hillGlideGame.js', 'Tiny wings style glider - [game, physics, flying]'),
    new ExampleInfo('Pong Game', 'pongGame.js', 'Classic paddle ball game - [game, classic, arcade]'),
    new ExampleInfo('Sliding Puzzle', 'slidingPuzzle.js', 'Tile sliding puzzle game - [game, puzzle, logic]'),
    new ExampleInfo('Raycasting Game', 'raycasting.js', 'Pseudo 3D raycasting demo - [3d, raycasting, wolfenstein]'),
    new ExampleInfo('--- PLUGINS ---'),
    new ExampleInfo('Box2d Demo', 'box2d.js', 'Box2D physics plugin demo - [physics, box2d, plugin]'),
    new ExampleInfo('Box2d Car', 'box2dCar.js', 'Drivable car with Box2D - [physics, box2d, vehicle]'),
    new ExampleInfo('Post Processing', 'postProcess.js', 'Shader effects and filters - [graphics, shaders, effects]'),
    new ExampleInfo('UI System Plugin', 'uiSystem.js', 'UI elements and widgets - [ui, plugin, interface]'),
    new ExampleInfo('Nine Slice', 'nineSlice.js', 'Scalable UI panel rendering - [ui, graphics, scaling]'),
    new ExampleInfo('--- FULL EXAMPLES ---'),
    new ExampleInfo('Starter', 'starter', 'Clean project template - [template, beginner]', true),
    new ExampleInfo('Breakout Tutorial', 'breakoutTutorial', 'Step-by-step breakout guide - [tutorial, breakout]', true),
    new ExampleInfo('Breakout Game', 'breakout', 'Complete breakout with effects - [game, breakout, complete]', true),
    new ExampleInfo('Platforming Game', 'platformer', 'Full platformer with levels - [game, platformer, complete]', true),
    new ExampleInfo('Puzzle Game', 'puzzle', 'Match-3 puzzle with HD graphics - [game, puzzle, match3]', true),
    new ExampleInfo('Stress Test', 'stress', 'Performance test with music - [performance, test, music]', true),
    new ExampleInfo('Box2D Plugin', 'box2d', 'Complete Box2D physics demo - [physics, box2d, complete]', true),
    new ExampleInfo('HTML Menus', 'htmlMenu', 'HTML integration example - [html, ui, integration]', true),
    new ExampleInfo('UI System Plugin', 'uiSystem', 'Complete UI system demo - [ui, plugin, complete]', true),
];

///////////////////////////////////////////////////////////////////////////////

// global variables
let iframeExample; // iframe of the current loaded example
let inputTimeout;  // timeout to debounce input
let consoleAutoScroll; // allow console to scroll automatically

function initExampleBrowser()
{
    // load the examples into the list
    filterExamples();

    // set the selected example from the URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const selectedExample = urlParams.get('example') || '';
    let exampleIndex = exampleList.findIndex((example) => example.filename === selectedExample);
    if (exampleIndex < 0)
        exampleIndex = 1;
    selectExample.selectedIndex = exampleIndex;
    setExample();

    // apply responsive layout
    addEventListener('resize', resizeWindow);
    resizeWindow();
}

function resizeWindow()
{
    // tweak layout for touch devices
    const isTouchDevice = window.ontouchstart !== undefined;
    if (isTouchDevice)
        container4.style.display = 'none';
    else
        selectExampleText.style.display = 'none';

    const windowAspect = innerWidth / innerHeight;
    const verticalLayout = windowAspect < 1;
    if (verticalLayout)
    {
        // vertical layout for thin screens
        if (container2.parentNode != container3)
            container3.insertBefore(container2, divCodeOptions);
        // resize iframe to the window
        setFrameSize(innerWidth-35);

        // fix code mirror sizing glitch
        codeMirror && codeMirror.setSize(innerWidth-35, null);
    }
    else
    {
        // horizontal layout for wide screens
        if (container2.parentNode != container1)
            container1.appendChild(container2);
        
        // show full controls
        container4.style.display = '';
        
        // resize iframe to fit half the window
        setFrameSize(innerWidth/2);

        // fix code mirror sizing glitch
        codeMirror && codeMirror.setSize(innerWidth/2 - 25, null);
    }

    function setFrameSize(w)
    {
        const aspect = 16 / 9; // HD aspect ratio
        w = w | 0;
        const h = w / aspect | 0;
        iframeContainer.style.width = w + 'px';
        iframeContainer.style.height = h + 'px';
        
        if (iframeExample)
        {
            // ensure iframe fills container tightly
            iframeExample.style.width = w + 'px';
            iframeExample.style.height = h + 'px';
        }
        
        // fix code mirror after layout changes
        if (codeMirror)
        {
            // fix glitch with code mirror sizing
            setTimeout(()=>codeMirror.refresh(), 500);
        }
    }
}

///////////////////////////////////////////////////////////////////////////////
// setting examples

function setExample()
{
    // get the original index if this is a filtered result
    const selectedOption = selectExample.options[selectExample.selectedIndex];
    let exampleIndex = selectedOption && selectedOption.originalIndex ? 
        parseInt(selectedOption.originalIndex) : 
        selectExample.selectedIndex;
    
    // make sure we have a valid example
    if (exampleIndex < 0 || exampleIndex >= exampleList.length)
        exampleIndex = 1;  // reset to default
    if (!exampleList[exampleIndex].filename)
        exampleIndex = 1;
    
    // load the example
    const example = exampleList[exampleIndex];
    exampleInfo.innerText = example.name + (example.description ? ' - ' + example.description : '');
    const filename = 'examples/' + example.filename;
    exampleLink.href = 'https://github.com/KilledByAPixel/LittleJS/tree/main/' + filename;
    exampleLink.innerText = filename;
    
    // update URL parameter
    const url = new URL(window.location);
    url.searchParams.set('example', example.filename);
    window.history.replaceState({}, '', url);
    
    loadFile(example.filename, example.largeExample);
}

async function loadFile(filename, largeExample)
{
    if (codeMirror)
        codeMirror.setOption('readOnly', largeExample);
    else
        textareaCode.disabled = largeExample;
    
    // disable buttons in large example mode
    setFrameControlsEnabled(!largeExample);
    
    if (largeExample)
    {

        // Show message in code view that full examples can't be edited
        const text = 'Code view not available for large examples.';
        setCode(text, filename);
        codeIsJS = false;
        if (codeMirror)
        {
            codeMirror.off('change', codeInput);
            codeMirror.setOption('mode', 'text');
            codeMirror.setValue(text);
        }
        else
            textareaCode.value = text;
        clearTimeout(inputTimeout);
        return;
    }

    try
    {
        const response = await fetch(filename);
        if (!response.ok)
            throw new Error('Could not load file: ' + filename);
        const text = await response.text();
        
        // set the code in both code mirror and textarea
        codeIsJS = true;
        if (codeMirror)
        {
            codeMirror.on('change', codeInput);
            codeMirror.setOption('mode', 'javascript');
            codeMirror.setValue(text);
        }
        else
            textareaCode.value = text;
        clearTimeout(inputTimeout);
        setCode(text);
    }
    catch (error)
    {
        setErrorMessage(error.message);
    }
}

function filterExamples(reset=0)
{
    if (reset)
        inputSearch.value = '';
    
    // clear current options
    selectExample.options.length = 0;
    
    // filter and add matching examples
    const searchTerm = inputSearch.value.toLowerCase().trim();
    for (let i = 0; i < exampleList.length; i++)
    {
        // check if search term matches name or description
        const example = exampleList[i];
        const text = example.name + (example.description ? ` - ${example.description}` : '');
        if (example.name.toLowerCase().includes(searchTerm) || 
            example.description.toLowerCase().includes(searchTerm))
        {
            const o = new Option(text);
            o.disabled = !example.filename;
            o.originalIndex = i;
            selectExample.add(o);
        }
    }
    
    if (!selectExample.options.length)
    {
        // show a message if no matches
        const o = new Option('No examples found matching "' + searchTerm + '"');
        o.disabled = true;
        selectExample.add(o);
    }
}

///////////////////////////////////////////////////////////////////////////////
// setting code

function codeInput()
{
    if (!checkboxLiveEdit.checked)
        return;

    // debounce input - get content from code mirror if available, otherwise from textarea
    clearTimeout(inputTimeout);
    const code = codeMirror ? codeMirror.getValue() : textareaCode.value;
    inputTimeout = setTimeout(() => setCode(code), 500);
}

function restartCode()
{
    // manually restart/run the code regardless of live edit setting
    const code = codeMirror ? codeMirror.getValue() : textareaCode.value;
    setCode(code);
}

function setFrameControlsEnabled(enabled=true)
{
    buttonPause.disabled = !enabled;
    buttonRestart.disabled = !enabled;
    buttonScreenshot.disabled = !enabled;
    buttonFullscreen.disabled = !enabled;
    checkboxWebGL.disabled = !enabled;
}

function setCode(code, filename)
{
    const largeExample = !!filename;
    filename = filename || 'shorts/base.html';

    clearTimeout(inputTimeout);
    if (iframeExample)
        iframeContainer.removeChild(iframeExample);

    unsetErrorMessage();
    unsetConsoleMessage();
    iframeExample = document.createElement('iframe');
    iframeContainer.appendChild(iframeExample);

    iframeExample.onload = ()=>
    {
        if (largeExample)
            return;

        // get the iframe content window and document
        const iframeContent = iframeExample.contentWindow;
        const iframeDocument = iframeContent.document;
        if (!iframeContent.engineInit)
        {
            setErrorMessage(`Failed to load ${filename}`);
            return;
        }

        // intercept errors
        function getErrorLine(stack)
        {
            // try to extract line number from stack trace
            // look for <anonymous> or injectedScript to find user code
            const anonymousMatch = stack.match(/(<anonymous>|injectedScript):(\d+)/);
            return anonymousMatch ? parseInt(anonymousMatch[2]) : -1;            
        }
        iframeContent.onerror = (message, source, lineno, colno, error) =>
        {
            let text = message;
            if (lineno)  
                text += ` (Line:${lineno}, Column:${colno})`
            if (error && error.stack)
                text += `\n` + error.stack;
            setErrorMessage(text);
            setErrorLine(lineno);
        }
        iframeContent.onunhandledrejection = (event) => 
        {
            let text = event.reason;
            setErrorMessage(text);
            if (event.reason && event.reason.stack)
            {
                text = event.reason.stack;
                const errorLine = getErrorLine(event.reason.stack);
                if (errorLine >= 0)
                    setErrorLine(errorLine);
            }
        };

        // intercept asserts
        const originalAssert = iframeContent.console.assert;
        iframeContent.console.assert = function (condition, ...output)
        {
           if (!condition)
           {
                const stack = (new Error).stack;
                const errorLine = getErrorLine(stack);
                if (errorLine >= 0)
                    setErrorLine(errorLine);
                
                // format output parameters properly
                const outputMessage = output.length > 0 ? output.map(m => stringifyMessage(m)).join(' ') : '';
                setErrorMessage('Assertion failed!\n' + outputMessage + '\n' + stack);
           }
            originalAssert.apply(this, arguments);
        };

        // intercept console prints
        const originalConsole = iframeContent.console;
        function interceptConsole(method)
        {
            const original = originalConsole[method];
            iframeContent.console[method] = function(...args)
            {
                const message = args.map(m=>stringifyMessage(m)).join('\n');
                setConsoleMessage(message);
                original.apply(originalConsole, args);
            };
        }
        ['log','info','warn','error','debug'].forEach(f=>interceptConsole(f));

        {
            // hook up buttons
            buttonScreenshot.onclick = () =>
            {
                if (iframeContent.debugScreenshot)
                    iframeContent.debugScreenshot();
            }

            // pause/resume functionality
            buttonPause.onclick = () =>
            {
                if (!iframeContent.getPaused || !iframeContent.setPaused)
                    return;
                
                const paused = !iframeContent.getPaused();
                iframeContent.setPaused(paused);
                buttonPause.textContent = paused ? 'Resume' : 'Pause';
            }
            buttonPause.textContent = 'Pause';

            // fullscreen functionality
            buttonFullscreen.onclick = ()=> iframeContent.toggleFullscreen();
        }

        // create a script element that overrides the default functions
        const overrideScript = iframeDocument.createElement('script');
        iframeDocument.body.appendChild(overrideScript);
        overrideScript.text = code;

        if (textareaError.style.display === 'block')
            return;

        // start LittleJS engine
        iframeContent.engineInit(iframeContent.gameInit, iframeContent.gameUpdate, iframeContent.gameUpdatePost, iframeContent.gameRender, iframeContent.gameRenderPost, ['tiles.png?'+Date.now()])
        .catch(error =>
        {
            const errorLine = getErrorLine(error.stack);
            if (errorLine >= 0)
                setErrorLine(errorLine);
            setErrorMessage(error.message + '\n' + error.stack);
            throw error;
        })
        .then(()=>
        {
            // setup frame controls
            setFrameControlsEnabled();
            iframeContent.setGLEnable(checkboxWebGL.checked);
            checkboxWebGL.onchange = ()=> iframeContent.setGLEnable(checkboxWebGL.checked);
        })
    }

    iframeExample.src = filename + '?' + Date.now();
}

///////////////////////////////////////////////////////////////////////////////
// error and console messages

function stringifyMessage(message)
{
    // make sure message is a string
    if (message === null)
        return 'null';
    if (Number.isNaN(message))
        return 'NaN';
    if (message === undefined)
        return 'undefined';
    if (message === 0)
        return '0';
    if (message === false)
        return 'false';
    return message;
}

function setMessage(message, element, clear=true)
{
    message = stringifyMessage(message);
    if (clear || !element.value)
        element.value = message;
    else
        element.value += '\n' + message;
    element.style.display = message ? 'block' : '';
    
    if (element === textareaConsole)
    {
        const maxConsoleLines = 100;
        const lines = element.value.split('\n');
        if (lines.length > maxConsoleLines)
        {
            // limit max lines, prevents slowdown from too many lines
            const excessLines = lines.length - maxConsoleLines;
            element.value = lines.slice(excessLines).join('\n');
        }
        
        // auto scroll to bottom only if user hasn't manually scrolled
        if (consoleAutoScroll)
            element.scrollTop = element.scrollHeight;
    }
}

function unsetMessage(element) 
{ 
    element.style.display = ''; 
    element.value = '';
}

function clearErrorLine()
{
    if (!codeMirror || !errorLineMarker)
        return;
    codeMirror.getDoc().removeLineClass(errorLineMarker, 'background', 'error-line');
}

function setErrorLine(lineNumber)
{
    if (!lineNumber || lineNumber <= 0)
        return;

    if (codeMirror)
    {
        clearErrorLine();
        --lineNumber; // codeMirror uses 0-based line numbers
        errorLineMarker = codeMirror.getDoc().addLineClass(lineNumber, 'background', 'error-line');
        if (checkboxJumpToErrors.checked)
        {
            codeMirror.scrollIntoView({line: lineNumber, ch: 0});
            codeMirror.focus();
        }
    }
    else if (textareaCode && checkboxJumpToErrors.checked)
    {
        // for textarea, calculate character position and set cursor
        const lines = textareaCode.value.split('\n');
        let charPos = 0;
        for (let i = 0; i < lineNumber - 1 && i < lines.length; i++)
        {
            charPos += lines[i].length + 1; // +1 for newline character
        }
        textareaCode.setSelectionRange(charPos, charPos);
        if (checkboxJumpToErrors.checked)
        {
            const line = textareaCode.value.split('\n');
            lineNumber = Math.min(Math.max(0, lineNumber-1), lines.length-1);

            // select error line in textarea
            let start = 0;
            for (let i = 0; i < lineNumber; i++) 
                start += lines[i].length + 1;
            textareaCode.selectionStart = start;
            textareaCode.selectionEnd = start + lines[lineNumber].length;
            textareaCode.focus();
        }
    }
}

function setErrorMessage(message)
{
    // prevent overwriting an existing error message
    const errorMessageIsVisible = textareaError.style.display === 'block';
    setFrameControlsEnabled(false);
    if (!errorMessageIsVisible)
        setMessage(message, textareaError);
}
function unsetErrorMessage() { unsetMessage(textareaError); clearErrorLine(); }
function setConsoleMessage(message) { setMessage(message, textareaConsole, false); }
function unsetConsoleMessage() { unsetMessage(textareaConsole); consoleAutoScroll = true; }
function onScrollConsole()
{
    // only auto scroll console is it is scrolled to bottom
    const tolerance = 5; // pixels of tolerance
    consoleAutoScroll = Math.abs(textareaConsole.scrollTop - (textareaConsole.scrollHeight - textareaConsole.clientHeight)) < tolerance;
}
textareaConsole.addEventListener('scroll', onScrollConsole);

///////////////////////////////////////////////////////////////////////////////
// load saved preferences from localStorage
const defaultTheme = 'littlejs';
const defaultFontSize = '16px';
const savePrefix = 'LittleJSExamples_';
const savedTheme = localStorage.getItem(savePrefix+'theme') || defaultTheme;
const savedFontSize = localStorage.getItem(savePrefix+'fontSize') || defaultFontSize;
selectFontSize.value = savedFontSize;
textareaCode.style.fontSize = savedFontSize;

///////////////////////////////////////////////////////////////////////////////
// setup code mirror

const useCodeMirror = true;
let codeMirror; // code mirror instance
let errorLineMarker; // marker for error line in code mirror
let codeIsJS; // is the current code javascript

const themes = 
[
    'littlejs',
    '3024-night',
    'abcdef',
    'ambiance',
    'blackboard',
    'monokai',
    'duotone-light',
    'icecoder',
    'lesser-dark',
    'night',
    'yonce'
];

// load theme and font size
for (const theme of themes)
{
    if (theme != 'littlejs')
        addCodeMirrorElement(`theme/${theme}.min.css`, 'link', 'stylesheet');
    const o = new Option(theme);
    o.selected = theme === savedTheme;
    selectTheme.add(o);
}

if (useCodeMirror)
{
    addCodeMirrorElement('codemirror.min.js', 'script').onload = ()=>
    addCodeMirrorElement('codemirror.min.css', 'link', 'stylesheet').onload = ()=>
    addCodeMirrorElement('addon/edit/matchbrackets.js', 'script').onload = ()=>
    addCodeMirrorElement('mode/javascript/javascript.min.js', 'script').onload = ()=>
    {
        if (codeMirror)
            return; // prevent duplicate initialization

        const textareaCode = document.getElementById('textareaCode');
        codeMirror = CodeMirror.fromTextArea(textareaCode, 
        {
            theme: savedTheme,
            indentUnit: 4,
            mode: codeIsJS ? 'javascript' : 'text',
            lineNumbers: true,
            lineWrapping: true,
            matchBrackets: true,
        });
        codeMirror.on('change', codeInput);
        loadTheme();
        resizeWindow(); // fix cursor positioning issue on startup
    }
}

function addCodeMirrorElement(filename, type, rel) 
{
    // add element for code mirror
    const e = document.createElement(type);
    e.rel = rel;
    filename = 'https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/' + filename;
    if (type === 'link')
        e.href = filename;
    else
        e.src = filename;
    e.crossOrigin = 'anonymous';
    document.head.appendChild(e);
    return e;
}

function loadTheme()
{
    const theme = selectTheme.value;
    const size = selectFontSize.value;
    
    // Save preferences to localStorage
    localStorage.setItem(savePrefix+'theme', theme);
    localStorage.setItem(savePrefix+'fontSize', size);
    
    // Apply the theme and font size
    textareaCode.style.fontSize = size;
    if (codeMirror)
    {
        codeMirror.getWrapperElement().style.fontSize = size;
        codeMirror.setOption('theme', theme);
    }
}

///////////////////////////////////////////////////////////////////////////////

// start up the browser
initExampleBrowser()

</script>
</body>
</html>